{% extends 'base.html.twig' %}

{% block title %}Episode{% endblock %}

 {% block stylesheets %}
     {{ encore_entry_link_tags('global') }}
     {{ encore_entry_link_tags('episodes') }}
 {% endblock %}

{% block body %}
    <h1 id="episode-head">Episode</h1>

    <div class="one-episode">
        <h2>{{ episode.title }}</h2>
        Number : {{ episode.number }}

        <p>{{ episode.synopsis }}</p>

        {% if app.user %}
            <div>
                <h3>Leave a comment: </h3>
                {{ form_start(form) }}
                {{ form_row(form.comment) }}
                {{ form_row(form.rate) }}
                <button class="primary-button">{{ button_label|default('Save') }}</button>
                {{ form_end(form) }}
            </div>
        {% endif %}
        {% for comment in comments %}
            <p>Comment of {{ comment.author.email }}</p>
            <p>{{ comment.comment }}</p>
            <p>Note : {{ comment.rate }}</p>

            {% if app.user %}

                {{ include('comment/_delete_form.html.twig') }}

            {% endif %}

        {% endfor %}
    </div>

    <a class="primary-button" href="{{ path('episode_index') }}">Back to list</a>
    <br>

    {% if is_granted("ROLE_ADMIN") %}
    <a href="{{ path('episode_edit', {'slug': episode.slug}) }}">Edit</a>
    <br>

    {{ include('episode/_delete_form.html.twig') }}
    {% endif %}

{% endblock %}
